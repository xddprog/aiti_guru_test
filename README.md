# Product Catalog API

API для управления каталогом товаров с иерархическими категориями, клиентами и заказами.

## Структура проекта

### Быстрый запуск с Docker Compose

```bash
# Запуск всех сервисов
docker compose up -d --build

# Просмотр логов
docker logs app-store

# Остановка сервисов
docker compose down
```

### Что запускается:
- **PostgreSQL** - база данных на порту 5432
- **FastAPI** - API сервер на порту 8000

### Доступ к сервисам:
- **API**: http://localhost:8000
- **Swagger документация**: http://localhost:8000/docs
- **PostgreSQL**: localhost:5432 (user: postgres, password: postgres, db: general)

## Тестовые данные

Проект автоматически создает тестовую базу данных согласно примеру из ТЗ


## API Endpoints

### Категории (`/api/v1/category`)
- `GET /` - получить все категории
- `GET /tree` - получить дерево категорий
- `GET /{id}` - получить категорию по ID
- `POST /` - создать категорию
- `PUT /{id}` - обновить категорию
- `DELETE /{id}` - удалить категорию

### Товары (`/api/v1/product`)
- `GET /` - получить все товары
- `GET /{id}` - получить товар по ID
- `POST /` - создать товар
- `PUT /{id}` - обновить товар

### Клиенты (`/api/v1/client`)
- `GET /` - получить всех клиентов
- `GET /{id}` - получить клиента по ID
- `POST /` - создать клиента
- `PUT /{id}` - обновить клиента

### Заказы (`/api/v1/order`)
- `GET /` - получить все заказы
- `GET /client-totals` - суммы заказов по клиентам
- `GET /{id}` - получить заказ по ID
- `POST /` - создать заказ
- `POST /{id}/items` - добавить товар в заказ
- `PUT /{id}/items/{item_id}` - обновить количество товара
- `DELETE /{id}/items/{item_id}` - удалить позицию из заказа
- `DELETE /{id}` - удалить заказ

## SQL Запросы

В файле `sql_queries.sql` содержатся все запросы из ТЗ, и варианты оптимизаций


## Архитектура

Проект использует Clean Architecture с разделением на слои:
- **API Layer** - FastAPI роутеры
- **Service Layer** - бизнес-логика  
- **Repository Layer** - работа с данными
